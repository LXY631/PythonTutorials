# 迭代器 & 生成器

## 迭代器

> 访问集合元素的一种方式，迭代器对象从集合的第一个元素开始访问，直到素有的元素被访问完结束，迭代器只能往前不会后退。不要求事先准备好整个迭代过程中所有的元素，迭代器仅仅在迭代到某个元素时才计算该元素，而在这之前或之后，元素可以不存在或者被销毁。适用于遍历一些巨大的或是无限的集合，比如几个G的文件。

## 迭代器特点

1. 访问者不需要关心迭代器内部的结构，仅需通过 next() 方法不断去取下一个内容
2. 不能随机访问集合中的某个值，只能从头到尾一次访问
3. 访问到一半时不能往回退
4. 便于循环比较大的数据集合，节省内存

## 生成一个迭代器

``` python
nums = iter([1,2,3])
print(nums)
print(nums.__next__()) # 1， Python 2.7 nums.next()
print(nums.__next__()) # 2
print(nums.__next__()) # 3
print(nums.__next__()) # StopIteration
```

## 生成器

> 一个函数调用时返回一个迭代器，那个函数就叫做生成器(generator)，如果函数中包含yield 语法，那这个函数就会变成生成器

- 只要含有 `yield` 关键字的函数都是生成器函数
- `yield` 和 `return` 不能共用且需要卸载函数内
- 只要是生成器函数执行之后得到一个生成器作为返回值
- `生成器.__next__()` 返回生成器执行结果，生成器也是迭代器

## yield 作用

yield 可以是函数中断，并保存中断状态，中断后，代码可以继续往下执行，过一段时间还可以在重新调用这个函数，从上次 yield 的下一句开始执行。

``` python
def cash_out(amount): # 函数是生成器
  while amount > 0:
    amount -= 100
    yield 100
    print("擦，又来取钱了...败家子")

ATM = cash_out(500) # ATM 是迭代器
print(type(ATM)) # <class 'generator'>
print("取到钱 %s 万" ATM.__next__()) # 100万
print("取到钱 %s 万" ATM.__next__()) # 100万
print("取到钱 %s 万" ATM.__next__()) # 100万
print("取到钱 %s 万" ATM.__next__()) # 100万
print("取到钱 %s 万" ATM.__next__()) # 100万

```